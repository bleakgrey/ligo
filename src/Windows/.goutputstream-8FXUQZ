using Gtk;

public class Ligo.Windows.Main: Gtk.Window {

	public Widgets.HeaderBar header;
	public Paned paned;
	public Widgets.Sidebar sidebar;
	public Widgets.StatusBar status_bar;
	public Widgets.Notebook notebook;
	public Box box;
	
	private Overlay overlay;
	private Granite.Widgets.OverlayBar overlay_bar;

	construct {
		default_height = 500;
		default_width = 800;
		
		sidebar = new Widgets.Sidebar ();
		status_bar = new Widgets.StatusBar ();
		notebook = new Widgets.Notebook ();
		
		var overlay_bar = new Granite.Widgets.OverlayBar ();
		var overlay = new Gtk.Overlay ();
		overlay.add (notebook);
		overlay.add_overlay (overlay_bar);
		overlay_bar.active = true;
		
		var box = new Box (Orientation.VERTICAL, 0);
		box.pack_end (status_bar, false, false, 0);
		box.pack_start (overlay, true, true, 0);
		
        paned = new Gtk.Paned (Orientation.HORIZONTAL);
        paned.position = 180;
        paned.pack1 (sidebar, false, false);
        paned.add2 (box);
		add (paned);
		
		header = new Widgets.HeaderBar ();
		set_titlebar (header);
		show_all ();
		overlay_bar.visible = false;
	}
	
	public Main (Gtk.Application _application) {
		application = _application;
		icon_name = "com.github.bleakgrey.ligo";
		resizable = true;
	}
	
	public void set_status (string? label = null) {
		overlay_bar.visible = label != null;
		if (overlay_bar.visible) {
			info ("YEA");
			overlay_bar.label = label;
		}
		else
		info ("YEA");
	}

}
